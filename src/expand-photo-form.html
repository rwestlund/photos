
<!--
    Copyright (c) 2016-2017. Randy Westlund and Jacqueline Kory Westlund.
    All rights reserved.
    This code is under the BSD-2-Clause license.
-->

<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="expand-photo-form">
    <template>
        <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
        <style>
            :host {
                --iron-image-placeholder: {
                    background: #dddddd;
                }
                width: 100%;
                height: 100%;
            }
            iron-image {
                --iron-image-width: 100%;
                margin: 0px 5px;
            }
            iron-icon.large-icon {
                color: magenta;
                width: 4em;
                height: 4em;
            }
            div.tall {
                height: 100%;
            }
            div.sidebar {
                cursor: pointer;
            }
        </style>

        <div class="layout horizontal justified center tall">
            <div class="layout horizontal center tall sidebar" on-tap="previous_photo">
                <iron-icon icon="hardware:keyboard-arrow-left" class="large-icon">
                </iron-icon>
            </div>
            <template is="dom-if" if="[[photoId]]">
                <iron-image src="/api/photos/[[photoId]]/big_thumbnail"
                        preload fade>
                </iron-image>
            </template>
            <div class="layout horizontal center tall sidebar" on-tap="next_photo">
                <iron-icon icon="hardware:keyboard-arrow-right" class="large-icon">
                </iron-icon>
            </div>
        </div>
    </template>

    <script>
        'use strict';
        Polymer({
            is: "expand-photo-form",
            behaviors: [ Polymer.IronOverlayBehavior ],
            properties: {
                photoId: {
                    type: Number,
                },
                photoList: {
                    type: Array,
                },
            },
            listeners: {
                tap: "close",
            },
            previous_photo: function (e) {
                e.stopPropagation();
                var index = this.photoList.map(o => o.id).indexOf(this.photoId);
                index--;
                if (index < 0) index = this.photoList.length - 1;
                this.set("photoId", this.photoList[index].id);
            },
            next_photo: function (e) {
                e.stopPropagation();
                var index = this.photoList.map(o => o.id).indexOf(this.photoId);
                index++;
                if (index >= this.photoList.length) index = 0;
                this.set("photoId", this.photoList[index].id);
            },
        })
    </script>
</dom-module>
